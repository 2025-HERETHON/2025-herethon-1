<!DOCTYPE html>
{% load static %}

<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>커뮤니티</title>
      <link rel="stylesheet" type="text/css" href="{% static 'css/CommunityList.css' %}">
      <script src="{% static 'js/community_home.js' %}"></script>
  </head>
  <body>
    <div id="header"></div>

    <main id="list-container">
  <div class="community-title">커뮤니티</div>
  <div class="community-description">
    사회 이슈에 대해 자유롭게 토론하며 시야를 넓히는 공간입니다.
  </div>
  <div class="comment-tab-div">
    {% if request.GET.sort == 'popular' or not request.GET.sort %}
    <div class="div4 active">인기순</div>
    {% else %}
    <a class="div4" href="?sort=popular">인기순</a>
    {% endif %} {% if request.GET.sort == 'recent' %}
    <div class="div4 active">최신순</div>
    {% else %}
    <a class="div4" href="?sort=recent">최신순</a>
    {% endif %}
  </div>
  <section class="community-card-div">
    {% for post in post_list %}
    <a href="{% url 'community:detail' post.id %}" class="card-link">
      <div class="article-card">
        <img
          class="thumnail"
          src="{{post.image.url}}"
          alt="{{post.thumnail}}"
        />
        <div class="article-card-contents">
          <div class="article-card-contents-div1">
            {{ post.title|truncatechars:30 }}
          </div>
          <div class="comment-div4">
            <div class="comment-buttons2 votes">
              <svg
                xmlns="<http://www.w3.org/2000/svg>"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
              >
                <mask
                  id="mask0_374_11825"
                  style="mask-type: alpha"
                  maskUnits="userSpaceOnUse"
                  x="0"
                  y="0"
                  width="24"
                  height="24"
                >
                  <rect width="24" height="24" fill="#D9D9D9" />
                </mask>
                <g mask="url(#mask0_374_11825)">
                  <path
                    d="M5.19227 21.6148C4.68727 21.6148 4.25977 21.4398 3.90977 21.0898C3.55977 20.7398 3.38477 20.3123 3.38477 19.8073V16.6131C3.38477 16.3989 3.4216 16.1864 3.49527 15.9756C3.56893 15.7647 3.68268 15.5772 3.83652 15.4131L5.83852 13.1533C5.97702 12.988 6.15518 12.9027 6.37302 12.8976C6.59102 12.8926 6.7776 12.9676 6.93277 13.1226C7.07127 13.2611 7.1456 13.4284 7.15577 13.6246C7.1661 13.8207 7.10202 13.9964 6.96352 14.1516L4.99227 16.3843H19.0078L17.0865 14.2016C16.948 14.0464 16.8839 13.8707 16.8943 13.6746C16.9044 13.4784 16.9788 13.3111 17.1173 13.1726C17.2724 13.0176 17.459 12.9426 17.677 12.9476C17.8948 12.9527 18.073 13.038 18.2115 13.2033L20.1635 15.4131C20.3173 15.5772 20.4311 15.7647 20.5048 15.9756C20.5784 16.1864 20.6153 16.3989 20.6153 16.6131V19.8073C20.6153 20.3123 20.4403 20.7398 20.0903 21.0898C19.7403 21.4398 19.3128 21.6148 18.8078 21.6148H5.19227ZM5.19227 20.1151H18.8078C18.8911 20.1151 18.9632 20.0846 19.024 20.0236C19.085 19.9627 19.1155 19.8906 19.1155 19.8073V17.8841H4.88452V19.8073C4.88452 19.8906 4.91502 19.9627 4.97602 20.0236C5.03685 20.0846 5.10893 20.1151 5.19227 20.1151ZM10.7598 14.1438L7.50402 10.8688C7.15268 10.5175 6.98118 10.0915 6.98952 9.59081C6.99785 9.09031 7.17768 8.6644 7.52902 8.31306L12.1693 3.67256C12.5206 3.3214 12.9475 3.14065 13.45 3.13031C13.9525 3.12015 14.3794 3.29065 14.7308 3.64181L17.996 6.90731C18.3474 7.25865 18.5282 7.6804 18.5385 8.17256C18.5487 8.6649 18.3782 9.08673 18.027 9.43806L13.3058 14.1591C12.9544 14.5104 12.5301 14.6835 12.0328 14.6783C11.5353 14.6733 11.1109 14.4951 10.7598 14.1438ZM16.9328 8.40931C16.9839 8.35798 17.0095 8.28423 17.0095 8.18806C17.0095 8.0919 16.9839 8.01815 16.9328 7.96681L13.6865 4.72081C13.6353 4.66948 13.5617 4.64381 13.4655 4.64381C13.3693 4.64381 13.2956 4.66948 13.2443 4.72081L8.57302 9.39181C8.52185 9.44315 8.49627 9.5169 8.49627 9.61306C8.49627 9.70923 8.52185 9.78298 8.57302 9.83431L11.8193 13.0803C11.8706 13.1316 11.9443 13.1573 12.0405 13.1573C12.1367 13.1573 12.2103 13.1316 12.2615 13.0803L16.9328 8.40931Z"
                    fill="white"
                  />
                </g>
              </svg>
              <div class="comment-div3">{{ post.votes.count }}</div>
            </div>
            <div class="comment-div4">
              <div class="comment-buttons2 messages">
                <svg
                  xmlns="<http://www.w3.org/2000/svg>"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <mask
                    id="mask0_374_11829"
                    style="mask-type: alpha"
                    maskUnits="userSpaceOnUse"
                    x="0"
                    y="0"
                    width="24"
                    height="24"
                  >
                    <rect width="24" height="24" fill="#D9D9D9" />
                  </mask>
                  <g mask="url(#mask0_374_11829)">
                    <path
                      d="M6.44068 17.9315L4.57373 19.7983C4.30842 20.0637 4.00324 20.1239 3.6582 19.9787C3.31331 19.8334 3.14087 19.5718 3.14087 19.194V5.62917C3.14087 5.15808 3.30406 4.75934 3.63046 4.43295C3.95685 4.10655 4.35559 3.94336 4.82668 3.94336H19.1734C19.6445 3.94336 20.0433 4.10655 20.3697 4.43295C20.696 4.75934 20.8592 5.15808 20.8592 5.62917V16.2457C20.8592 16.7168 20.696 17.1156 20.3697 17.442C20.0433 17.7684 19.6445 17.9315 19.1734 17.9315H6.44068ZM5.84525 16.5327H19.1734C19.2452 16.5327 19.311 16.5028 19.3707 16.443C19.4305 16.3833 19.4604 16.3175 19.4604 16.2457V5.62917C19.4604 5.55736 19.4305 5.49162 19.3707 5.43194C19.311 5.3721 19.2452 5.34218 19.1734 5.34218H4.82668C4.75487 5.34218 4.68913 5.3721 4.62945 5.43194C4.56961 5.49162 4.53969 5.55736 4.53969 5.62917V17.8241L5.84525 16.5327Z"
                      fill="white"
                    />
                  </g>
                </svg>
                <div class="comment-div3">
                  {{ post.filtered_comments | length }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </a>
    {% empty %}
    <p class="community-title">게시물이 없습니다.</p>
    {% endfor %}
  </section>
</main>

<div id="footer"></div>
<script src="./communityList.js"></script>
